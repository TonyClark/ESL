export main;

value = 0;

act a(b) {
  
  SetB(value) -> {
    case b {
      null -> {
        b := value;
        b <- SetB(self);
        b <- Do
      };
      _ -> {}
    }
  };
  
  Do -> {
    print(self + ': ' + value);
    value := value + 1;
    b <- Do
  };
  
  Time(_) -> {}
  
};

act main {

  -> new a(null) <- SetB(new a(null));

  Time(100) -> { stopAll() };

  Time(_) -> {}

}


  